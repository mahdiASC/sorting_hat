<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/file_load.css">
</head>
<body>
    <div id="page-wrapper">
        
        <h1>Input files for sorting</h1>
        <h3>NOTE: the following files require a unique setup beforehand</h3>
        <div class="fileUpload btn btn-primary">
            <span>Select a Cohort file (CSV):
                <br>
                <span class="file_text"> Default: 'cohort.csv'</span>
            </span>
            <input type="file" id="cohort_file" class="upload" />
        </div>


        <div class="fileUpload btn btn-primary">
            <span>Select a Question file (JSON):
                <br>
                <span class="file_text"> Default: 'question.json'</span>
            </span>
            <input type="file" id="question_file" class="upload" />
        </div>

        <div class="fileUpload btn btn-primary">
            <span>Select a Student file (CSV or JSON):
                <br>
                <span class="file_text"> Default: 'student.json'</span>
            </span>
            <input type="file" id="student_file" class="upload" />
        </div>

        <button onclick="myFunc()">Submit</button>
    </div>

                <!-- p5  -->
    <script src="./js/p5.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.14/p5.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.14/addons/p5.dom.js"></script>     -->
    
    <script src="./js/jquery.min.js"></script>
    
    <!-- papaparse -->
    <script src="./js/papaparse.js"></script>
    
    <!-- chart.js cdn -->
    <script src="./js/chart.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.min.js"></script> -->
    
    <!-- custom scripts -->
    <script src="./js/mahdi.js"></script>
    
    <script src="./js/base.js"></script>
    <script src="./js/student.js"></script>
    <script src="./js/cohort.js"></script>
    <script src="./js/question.js"></script>
    <script src="./js/sort.js"></script>
    <script src="./js/statistic.js"></script>
    <script src="./js/timer.js"></script>
    <script src="./js/priority.js"></script>
    <script src="./js/validate.js"></script>
    
    <script>
        let useStudentJSON = true;
let api_key = 'AIzaSyDlA_pTF7IbYhUehFHwmZZZW9Cs9GbVGS8';
let secDelay = 1;//delay in seconds for api call
let splice_number = 100; //number of students per API call (max 100)
let max_travel_time = 1; //in hours
let white_threshold = .03; //percentage of applicants we will consider - randomly removed up to this percent
let minority_rate = 0.8; //the percentage of brown students per cohort (this is rounded down by minority_leeway students as a minimum)
let minority_leeway = 2; //# of students that lowers the bar for minority_rate 
let grade_leeway = 2; //# of students that lowers the bar for grade level disparity (between 10th and 11th);
// TURN INTO TIME NOT DISTANCE (under 1 hour time)

// ARE WE EXCLUDING WHITE APPLICANTS, PERIOD?
let priorities = [
    "score"
    ,
    "duration"
    ,
    "ethnicity"
    ,
    "grade"
]

let graph_colors = [
    "rgba(80,193,233,0.75)",
    "rgba(162,133,220,0.75)",
    "rgba(157,208,82,0.75)",
    "rgba(235,171,36,0.75)",
    "rgba(234,93,79,0.75)",
    "rgba(60,62,66,0.75)",
    "rgba(235,55,55,0.75)",
    "rgba(200,222,235,0.75)"
]


// let max_seconds = max_travel_time *3600;
let max_seconds = 1936026; //OMIT THIS (just for testing)
let priority_list = priorities.map(x=>Priority.find_by_name(x));
var store_file = function(file, func){
    //helper method for making ajax request on local files
    let re = new RegExp(".csv");
    let _type = re.exec(file) ? "text" : "json";
    $.get({
        url: file,
        async: false,
        dataType: _type,
        success: func
    });
}

var c_file;
var q_file;
var s_file;
var c_reader;
var data

    </script>


<script src="js/file_load.js"></script>
</body>
</html>